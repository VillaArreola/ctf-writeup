---
// Este layout recibe "Content" y "post" desde la página [slug].astro
const { Content, frontmatter } = Astro.props;
import '../styles/global.css';
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{frontmatter.title}</title>
  </head>
  <body class="bg-black text-white font-sans">
    <header class="flex justify-between items-center px-6 py-4 border-b border-gray-800">
      <div class="text-xl font-bold">VA</div>
      <nav class="space-x-4">
        <a href="/" class="hover:underline text-cyan-400">Home</a>
        <span>/</span>
        <a href={`/ctf/${frontmatter.platform.toLowerCase()}`} class="hover:underline text-cyan-400">
          {frontmatter.platform}
        </a>
        <span>/</span>
        <span class="text-gray-400">{frontmatter.title}</span>
      </nav>
    </header>

    <div class="flex max-w-7xl mx-auto py-10 px-6">
      <!-- Índice lateral -->
      <aside class="w-1/5 pr-4 sticky top-20 text-sm text-gray-400">
        <ul class="space-y-2">
          <li><a href="#descripcion" class="hover:text-cyan-400">🧠 Descripción</a></li>
          <li><a href="#recon" class="hover:text-cyan-400">🔍 Reconocimiento</a></li>
          <li><a href="#vulns" class="hover:text-cyan-400">⚠️ Vulnerabilidades</a></li>
          <li><a href="#exploits" class="hover:text-cyan-400">💥 Explotación</a></li>
          <li><a href="#escalada" class="hover:text-cyan-400">📈 Escalada</a></li>
        </ul>
      </aside>

      <!-- Contenido principal -->
      <main class="w-4/5 prose prose-invert max-w-none">
        <Content />

        <!-- Comentarios -->
        <div class="mt-16">
          <div
            id="cusdis_thread"
            data-host="https://cusdis.com"
            data-app-id="TU_ID_CUSDIS"
            data-page-id={frontmatter.slug}
            data-page-url={`https://ctf.villaarreola.com/ctf/${frontmatter.slug}`}
            data-page-title={frontmatter.title}
          ></div>
          <script defer src="https://cusdis.com/js/cusdis.es.js"></script>
        </div>
      </main>
    </div>

    <!-- Footer -->
    <footer class="border-t border-gray-800 py-6 text-center text-sm text-gray-500">
      <div class="space-x-6">
        <a href="/redes" class="hover:underline">Redes</a>
        <a href="/objetivo" class="hover:underline">Objetivo</a>
        <a href="/blog" class="hover:underline">Blog</a>
        <a href="/contacto" class="hover:underline">Contacto</a>
      </div>
    </footer>
  </body>
</html>
